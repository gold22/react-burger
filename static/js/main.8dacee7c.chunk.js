(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={main:"modal-overlay_main__3XSUK"}},103:function(e,t,n){e.exports={cards:"ingredient-cards_cards__1STKv"}},104:function(e,t,n){e.exports={main:"ingredient-tabs_main__34-bT"}},105:function(e,t,n){e.exports={main:"constructor-page_main__tXA5s"}},106:function(e,t,n){e.exports={main:"dialog-page_main__1pEvH"}},107:function(e,t,n){e.exports={main:"error-message_main__qQc8H"}},108:function(e,t,n){e.exports={main:"form_main__8p870"}},109:function(e,t,n){e.exports={cards:"order-cards_cards__14mAS"}},110:function(e,t,n){e.exports={buttons:"profile-form_buttons__2L2R5"}},111:function(e,t,n){e.exports={main:"order-info-page_main__3POTC"}},17:function(e,t,n){e.exports={main:"orders-status_main__3rKHb",orderPanels:"orders-status_orderPanels__1FklD",orderPanel:"orders-status_orderPanel__2S4sq",doneOrderPanel:"orders-status_doneOrderPanel__fGZgp orders-status_orderPanel__2S4sq",pendingOrderPanel:"orders-status_pendingOrderPanel__1kp-c orders-status_orderPanel__2S4sq",orders:"orders-status_orders__2_eB7",totalShadow:"orders-status_totalShadow__3k6yJ"}},18:function(e,t,n){e.exports={main:"order-info_main__2sb6R",ingredients:"order-info_ingredients__nDvza",ingredient:"order-info_ingredient__19WK9",label:"order-info_label__2rmjN",icon:"order-info_icon__1KMBN",price:"order-info_price__p6pSH",footer:"order-info_footer__VdhPs"}},195:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(26),i=n.n(s),o=n(42),u=n(6),l=n(10),d=function(){return Object(o.b)()},j=o.c,p=n(4),m=n(2),b=n(28),O=n(97),x=n.n(O),f=n(0),_=function(e){var t=e.icon,n=e.text,r=e.to,a=e.exact,c=Object(b.a)(e,["icon","text","to","exact"]),s=Object(l.k)(r),i=!s||!s.isExact&&a?"secondary":"primary",o=!s||!s.isExact&&a?"text_color_inactive":"text_color_primary";return Object(f.jsxs)(u.c,Object(m.a)(Object(m.a)({to:r,exact:a,className:"".concat(x.a.main," pl-5 pr-5 pb-4 pt-4")},c),{},{children:["burger"===t&&Object(f.jsx)(p.BurgerIcon,{type:i}),"list"===t&&Object(f.jsx)(p.ListIcon,{type:i}),"profile"===t&&Object(f.jsx)(p.ProfileIcon,{type:i}),Object(f.jsx)("p",{className:"text text_type_main-default pl-2 ".concat(o),children:n})]}))},h=n(29),g=n.n(h),v=function(){return Object(f.jsx)("header",{className:"".concat(g.a.header," ml-10 mr-10 mt-10"),children:Object(f.jsxs)("div",{className:g.a.headerContent,children:[Object(f.jsxs)("nav",{className:g.a.leftNav,children:[Object(f.jsx)(_,{icon:"burger",text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",to:"/",exact:!0,"data-testid":"constructor-link"}),Object(f.jsx)(_,{icon:"list",text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",to:"/feed"})]}),Object(f.jsx)("div",{className:g.a.logo,children:Object(f.jsx)(u.b,{to:"/",children:Object(f.jsx)(p.Logo,{})})}),Object(f.jsx)("nav",{className:g.a.rightNav,children:Object(f.jsx)(_,{icon:"profile",text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",to:"/profile"})})]})})},E=n(200),y=n(114),S=n(7),N=n(202),R=n(201),T=n(69);!function(e){e.Bun="bun",e.Sauce="sauce",e.Main="main"}(r||(r={}));var k,C=function(e,t){return t.find((function(t){return e===t.id}))},w=function(e){return e.reduce((function(e,t){return e+t.price}),0)},I=function(e){return e.map((function(e){return e.id}))},U=function(e){return e.type===r.Bun},D=function(e){return e.find((function(e){return U(e)}))},P=n(203),L="SET_BUN",A="ADD_INGREDIENT",M="REMOVE_INGREDIENT",G="REMOVE_INGREDIENTS",B="MOVE_INGREDIENT",J=function(e){return{type:L,bun:e}},W=n(70),z=n.n(W),H=function(e){var t=e.ingredient,n=e.type,r=e.index,a=d(),c=Object(R.a)({type:"ingredient",item:{index:r}}),s=Object(S.a)(c,2)[1],i=Object(N.a)({accept:"ingredient",drop:function(e){var t;"undefined"!==typeof e.index&&e.index!==r&&a((t=e.index,{type:B,oldIndex:t,newIndex:r})),"undefined"!==typeof e.ingredient&&(U(e.ingredient)?a(J(e.ingredient)):a(function(e,t){return{type:A,ingredient:Object(m.a)(Object(m.a)({},e),{},{uuid:Object(P.a)()}),index:t}}(e.ingredient,r)))}}),o=Object(S.a)(i,2)[1];return"center"===n?Object(f.jsx)("div",{ref:s,"data-type":"element-drag-area",children:Object(f.jsxs)("div",{className:"".concat(z.a.optional," pr-1"),ref:o,"data-type":"element-drop-area",children:[Object(f.jsx)(p.DragIcon,{type:"primary"}),Object(f.jsx)(p.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.imageMobile,handleClose:function(){a(function(e){return{type:M,index:e}}(r))}})]})}):Object(f.jsx)("div",{className:"".concat(z.a.main," pl-8"),ref:o,"data-type":"element-drop-area",children:Object(f.jsx)(p.ConstructorElement,{type:n,isLocked:!0,text:"".concat(t.name," ").concat("top"===n?"(\u0432\u0435\u0440\u0445)":"(\u043d\u0438\u0437)"),price:t.price,thumbnail:t.imageMobile})})},Q=n(72),V=n.n(Q),q=function(){var e=j((function(e){return{bun:D(e.burgerConstructor.ingredients),ingredients:e.burgerConstructor.ingredients.filter((function(e){return!U(e)}))}})),t=e.bun,n=e.ingredients;return Object(f.jsxs)("div",{className:V.a.main,children:[t&&Object(f.jsx)(H,{index:0,type:"top",ingredient:t}),Object(f.jsx)("div",{className:"".concat(V.a.optionalItems," custom-scroll"),children:n.map((function(e,n){return Object(f.jsx)(H,{index:t?n+1:n,type:"center",ingredient:e},e.uuid)}))}),t&&Object(f.jsx)(H,{index:n.length+1,type:"bottom",ingredient:t})]})},F=n(100),K=n.n(F),Z=function(e){var t=e.children,n=e.onClick;return Object(f.jsx)("div",{className:K.a.main,onClick:function(e){n(),e.stopPropagation()},children:t})},X=n(30),Y=n.n(X),$=function(e){var t=e.title,n=e.visible,r=e.children,a=e.onClose;if(c.a.useEffect((function(){if(!n)return function(){};var e=function(e){"Escape"===e.key&&a()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n,a]),!n)return null;var s=document.getElementById("modal");if(!s)return null;var o=function(){a()};return i.a.createPortal(Object(f.jsx)(Z,{onClick:o,children:Object(f.jsxs)("div",{className:"".concat(Y.a.main," pl-10 pt-10 pr-10 pb-15"),onClick:function(e){e.stopPropagation()},children:[Object(f.jsxs)("div",{className:Y.a.title,children:[Object(f.jsx)("p",{className:"text text_type_main-large",children:t}),Object(f.jsx)("div",{className:Y.a.closeArea,children:Object(f.jsx)("div",{className:Y.a.closeIcon,"data-type":"close-icon",children:Object(f.jsx)(p.CloseIcon,{type:"primary",onClick:o})})})]}),Object(f.jsx)("div",{className:Y.a.content,children:r})]})}),s)},ee=function(e){var t=e.visible,n=e.message,r=e.onClose;return t?Object(f.jsx)($,{title:"\u041e\u0448\u0438\u0431\u043a\u0430!",visible:!0,onClose:r,children:Object(f.jsx)("p",{className:"text text_type_main-medium text_color_error mt-4",children:n})}):null},te=n.p+"static/media/done.cc5a59a7.gif",ne=function(e){var t=e.visible,n=e.onClose,r=j((function(e){return e})).order;return Object(f.jsxs)($,{title:"",visible:t,onClose:n,children:[Object(f.jsx)("p",{className:"text text_type_digits-large mt-4","data-testid":"order-number",children:r.number}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-8 mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(f.jsx)("img",{src:te,alt:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d"}),Object(f.jsx)("p",{className:"text text_type_main-default mt-15 mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-15",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},re=n(5),ae=n.n(re),ce=n(8),se="CREATE_ORDER_REQUEST",ie="CREATE_ORDER_SUCCESS",oe="CREATE_ORDER_ERROR",ue=function(e){return e instanceof Error?e.message:"Unknown error"},le=n(101),de=n(102),je=function(){function e(t){var n=t.url,r=t.wsUrl;Object(le.a)(this,e),this.url=void 0,this.wsUrl=void 0,this.url=n,this.wsUrl=r}return Object(de.a)(e,[{key:"getIngredients",value:function(){var e=Object(ce.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch("".concat(this.url,"/ingredients"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var t=Object(ce.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={ingredients:n},t.abrupt("return",this.fetch("".concat(this.url,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.getAccessToken()},body:JSON.stringify(r)}));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getOrder",value:function(){var e=Object(ce.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch("".concat(this.url,"/orders/").concat(t));case 2:if(1===(n=e.sent).orders.length){e.next=5;break}throw new Error("\u0417\u0430\u043a\u0430\u0437 #".concat(t," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"));case 5:return e.abrupt("return",n.orders[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerUser",value:function(){var t=Object(ce.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(this.url,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return r=t.sent,e.setAccessToken(r.accessToken),e.setRefreshToken(r.refreshToken),t.abrupt("return",r.user);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"logInUser",value:function(){var t=Object(ce.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(this.url,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return r=t.sent,e.setAccessToken(r.accessToken),e.setRefreshToken(r.refreshToken),t.abrupt("return",r.user);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"logOutUser",value:function(){var t=Object(ce.a)(ae.a.mark((function t(){return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(this.url,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.getAccessToken()},body:JSON.stringify({token:e.getRefreshToken()})});case 2:e.setAccessToken(null),e.setRefreshToken(null);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"sendResetUserPasswordEmail",value:function(){var e=Object(ce.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch("".concat(this.url,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetUserPassword",value:function(){var e=Object(ce.a)(ae.a.mark((function e(t){var n,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.password,r=t.token,e.next=3,this.fetch("".concat(this.url,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,token:r})});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var t=Object(ce.a)(ae.a.mark((function t(){var n;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(this.url,"/auth/user"),{headers:{Authorization:e.getAccessToken()}});case 2:return n=t.sent,t.abrupt("return",n.user);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateUser",value:function(){var t=Object(ce.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(this.url,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:e.getAccessToken()},body:JSON.stringify(n)});case 2:return r=t.sent,t.abrupt("return",r.user);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"updateToken",value:function(){var t=Object(ce.a)(ae.a.mark((function t(){var n;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("".concat(this.url,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.getAccessToken()},body:JSON.stringify({token:e.getRefreshToken()})});case 2:n=t.sent,e.setAccessToken(n.accessToken),e.setRefreshToken(n.refreshToken);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var t=Object(ce.a)(ae.a.mark((function t(n){var r,a,c,s,i=arguments;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,fetch(n,r);case 3:if(403!==(a=t.sent).status||!r.headers||!("Authorization"in r.headers)){t.next=10;break}return t.next=7,this.updateToken();case 7:return t.next=9,fetch(n,Object(m.a)(Object(m.a)({},r),{},{headers:Object(m.a)(Object(m.a)({},r.headers),{},{Authorization:e.getAccessToken()})}));case 9:a=t.sent;case 10:return t.next=12,a.text();case 12:c=t.sent,s=null;try{s=JSON.parse(c)}catch(o){}if(!s||!s.success){t.next=17;break}return t.abrupt("return",s);case 17:if(!s||!s.message){t.next=19;break}throw new Error(s.message);case 19:throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"+": \u041a\u043e\u0434 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f HTTP - ".concat(a.status)+": HTTP \u043e\u0442\u0432\u0435\u0442 - ".concat(c));case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())},{key:"getOrdersSocketUrl",value:function(){return"".concat(this.wsUrl,"/orders/all")}},{key:"createOrdersSocket",value:function(){return new WebSocket(this.getOrdersSocketUrl())}},{key:"getUserOrdersSocketUrl",value:function(){return"".concat(this.wsUrl,"/orders")}},{key:"createUserOrdersSocket",value:function(){var t=e.getAccessToken().slice(7);return new WebSocket("".concat(this.getUserOrdersSocketUrl(),"?token=").concat(t))}}],[{key:"getAccessToken",value:function(){var e;return null!==(e=localStorage.getItem("accessToken"))&&void 0!==e?e:""}},{key:"setAccessToken",value:function(e){e?localStorage.setItem("accessToken",e):localStorage.removeItem("accessToken")}},{key:"getRefreshToken",value:function(){var e;return null!==(e=localStorage.getItem("refreshToken"))&&void 0!==e?e:""}},{key:"setRefreshToken",value:function(e){e?localStorage.setItem("refreshToken",e):localStorage.removeItem("refreshToken")}},{key:"isAuthenticated",value:function(){return!!e.getRefreshToken()}}]),e}(),pe=n(31),me=n.n(pe),be=function(){var e=c.a.useState(!1),t=Object(S.a)(e,2),n=t[0],r=t[1],a=j((function(e){return{ingredientsCount:e.burgerConstructor.ingredients.length,orderPrice:w(e.burgerConstructor.ingredients)}})),s=a.ingredientsCount,i=a.orderPrice,o=j((function(e){return e})).order,u=Object(l.h)(),m=d(),b=Object(N.a)({accept:"ingredient",drop:function(e){e.ingredient&&m(J(e.ingredient))},canDrop:function(e){return"undefined"!==typeof e.ingredient&&U(e.ingredient)}}),O=Object(S.a)(b,2)[1];return 0===s?Object(f.jsx)("section",{className:"".concat(me.a.main," pt-25 pl-4"),children:Object(f.jsx)("div",{className:me.a.dropArea,ref:O,"data-testid":"bun-drop-area",children:Object(f.jsx)("p",{className:"text text_type_main-default",children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441\u0431\u043e\u0440\u043a\u0443 \u0431\u0443\u0440\u0433\u0435\u0440\u0430 \u0441 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0431\u0443\u043b\u043a\u0438 \u0441\u044e\u0434\u0430"})})}):Object(f.jsxs)("section",{className:"".concat(me.a.main," pt-25 pl-4"),"data-testid":"burger-constructor",children:[Object(f.jsx)(q,{}),Object(f.jsxs)("div",{className:"".concat(me.a.submit," pt-10 pr-8"),children:[Object(f.jsxs)("div",{className:me.a.total,children:[Object(f.jsx)("p",{className:"text text_type_digits-medium",children:i}),Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]}),Object(f.jsx)(p.Button,{type:"primary",size:"large",onClick:function(){o.isCreating||(je.isAuthenticated()?(m(function(){var e=Object(ce.a)(ae.a.mark((function e(t,n,r){var a,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:se}),e.prev=1,a=n().burgerConstructor.ingredients,e.next=5,r.createOrder(I(a));case 5:c=e.sent,t({type:ie,name:c.name,number:c.order.number}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:oe,message:ue(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n,r){return e.apply(this,arguments)}}()),r(!0)):u.replace({pathname:"/login"}))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(f.jsx)($,{title:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430",visible:n&&o.isCreating,onClose:function(){},children:Object(f.jsx)("p",{className:"text text_type_main-medium text_color_inactive mt-8 mb-6",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u0442\u0441\u044f..."})}),Object(f.jsx)(ne,{visible:n&&!o.isCreating&&!o.creationError,onClose:function(){m({type:G}),r(!1)}}),Object(f.jsx)(ee,{visible:n&&!o.isCreating&&!!o.creationError,message:o.creationError,onClose:function(){r(!1)}})]})]})},Oe=n(51),xe=n.n(Oe),fe=function(e){var t=e.ingredient,n=j((function(e){return n=t.id,e.burgerConstructor.ingredients.reduce((function(e,t){return n===t.id?e+1:e}),0);var n})),r=Object(l.i)(),a=Object(l.h)(),c=Object(R.a)({type:"ingredient",item:{ingredient:t}}),s=Object(S.a)(c,2)[1],i=t.image,o=t.name,u=t.price;return Object(f.jsxs)("div",{className:xe.a.main,onClick:function(){a.push({pathname:Object(l.f)("/ingredients/:id",{id:t.id}),state:{background:r}})},ref:s,"data-type":"ingredient-card",children:[n>0&&Object(f.jsx)("div",{"data-type":"ingredient-counter",children:Object(f.jsx)(p.Counter,{count:n,size:"default"})}),Object(f.jsx)("img",{className:"ml-4 mr-4",src:i,alt:o}),Object(f.jsxs)("div",{className:"mt-1 mb-1 ".concat(xe.a.price),children:[Object(f.jsx)("p",{className:"text text_type_digits-default mr-2","data-type":"ingredient-price",children:u}),Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]}),Object(f.jsx)("p",{className:"text text_type_main-default ".concat(xe.a.name),"data-type":"ingredient-name",children:o})]})},_e=n(103),he=n.n(_e),ge=c.a.forwardRef((function(e,t){var n=e.title,r=e.ingredients,a=Object(b.a)(e,["title","ingredients"]);return Object(f.jsxs)("div",Object(m.a)(Object(m.a)({ref:t},a),{},{children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:n}),Object(f.jsx)("div",{className:"".concat(he.a.cards," pt-6 pb-10 pl-4"),children:r.map((function(e){return Object(f.jsx)(fe,{ingredient:e},e.id)}))})]}))})),ve=n(104),Ee=n.n(ve),ye=function(e){var t=e.value,n=e.onChange,a=function(e){return n(e)};return Object(f.jsxs)("div",{className:Ee.a.main,children:[Object(f.jsx)(p.Tab,{value:r.Bun,active:t===r.Bun,onClick:a,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(f.jsx)(p.Tab,{value:r.Sauce,active:t===r.Sauce,onClick:a,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(f.jsx)(p.Tab,{value:r.Main,active:t===r.Main,onClick:a,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"})]})},Se=n(73),Ne=n.n(Se),Re=function(){var e=c.a.useState(r.Bun),t=Object(S.a)(e,2),n=t[0],a=t[1],s=j((function(e){return e.ingredientsList})).ingredients,i={bun:c.a.useRef(null),sauce:c.a.useRef(null),main:c.a.useRef(null)},o=c.a.useMemo((function(){return s.filter((function(e){return U(e)}))}),[s]),u=c.a.useMemo((function(){return s.filter((function(e){return function(e){return e.type===r.Sauce}(e)}))}),[s]),l=c.a.useMemo((function(){return s.filter((function(e){return function(e){return e.type===r.Main}(e)}))}),[s]);return Object(f.jsxs)("section",{className:Ne.a.main,children:[Object(f.jsx)("p",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(f.jsx)(ye,{value:n,onChange:function(e){i[e].current.scrollIntoView({behavior:"smooth"}),a(e)}}),Object(f.jsxs)("div",{className:"".concat(Ne.a.cards," mt-10 custom-scroll"),onScroll:function(e){var t=e.target.scrollTop,c=t,s=Math.abs(i.sauce.current.offsetTop-i.bun.current.offsetTop-t),o=Math.abs(i.main.current.offsetTop-i.bun.current.offsetTop-t),u=Math.min(c,s,o);u===c&&n!==r.Bun?a(r.Bun):u===s&&n!==r.Sauce?a(r.Sauce):u===o&&n!==r.Main&&a(r.Main)},children:[Object(f.jsx)(ge,{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:o,ref:i.bun,"data-testid":"bun-cards"}),Object(f.jsx)(ge,{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:u,ref:i.sauce,"data-testid":"sauce-cards"}),Object(f.jsx)(ge,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430",ingredients:l,ref:i.main,"data-testid":"main-cards"})]})]})},Te=n(105),ke=n.n(Te),Ce=function(){return Object(f.jsx)("div",{className:ke.a.main,children:Object(f.jsxs)(E.a,{backend:y.a,children:[Object(f.jsx)(Re,{}),Object(f.jsx)(be,{})]})})},we=n(106),Ie=n.n(we),Ue=function(e){var t=e.children;return Object(f.jsx)("div",{className:Ie.a.main,children:t})},De=n(32),Pe=n.n(De),Le=function(e){var t=e.ingredient,n=t.calories,r=t.carbohydrates,a=t.fat,c=t.imageLarge,s=t.name,i=t.proteins;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{src:c,alt:s}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8","data-type":"ingredient-name",children:s}),Object(f.jsxs)("div",{className:Pe.a.details,children:[Object(f.jsxs)("div",{className:Pe.a.detail,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:n})]}),Object(f.jsxs)("div",{className:Pe.a.detail,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:i})]}),Object(f.jsxs)("div",{className:Pe.a.detail,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:a})]}),Object(f.jsxs)("div",{className:Pe.a.detail,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(f.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r})]})]})]})},Ae=n(107),Me=n.n(Ae),Ge=function(e){var t=e.message;return Object(f.jsxs)("div",{className:Me.a.main,children:[Object(f.jsx)(p.InfoIcon,{type:"error"}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_error ml-2",children:t})]})},Be="SHOW_INGREDIENT_DETAILS",Je="HIDE_INGREDIENT_DETAILS",We=function(e){return{type:Be,ingredient:e}},ze=function(){return{type:Je}},He=function(){var e=Object(l.j)().id,t=j((function(e){return e.ingredientsList})).ingredients,n=d(),r=c.a.useMemo((function(){return C(e,t)}),[e,t]);return c.a.useEffect((function(){return r&&n(We(r)),function(){n(ze())}}),[r,n]),r?Object(f.jsxs)(Ue,{children:[Object(f.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(f.jsx)(Le,{ingredient:r})]}):Object(f.jsx)(Ue,{children:Object(f.jsx)(Ge,{message:"Ingredient #".concat(e," is not found")})})},Qe=n(108),Ve=n.n(Qe),qe=function(e){var t=e.children,n=e.onSubmit;return Object(f.jsx)("form",{className:Ve.a.main,onSubmit:n,children:t})},Fe="REGISTER_USER_REQUEST",Ke="REGISTER_USER_SUCCESS",Ze="REGISTER_USER_ERROR",Xe="LOGIN_USER_REQUEST",Ye="LOGIN_USER_SUCCESS",$e="LOGIN_USER_ERROR",et="LOGOUT_USER_REQUEST",tt="LOGOUT_USER_SUCCESS",nt="LOGOUT_USER_ERROR",rt="GET_USER_REQUEST",at="GET_USER_SUCCESS",ct="GET_USER_ERROR",st="UPDATE_USER_REQUEST",it="UPDATE_USER_SUCCESS",ot="UPDATE_USER_ERROR",ut=function(){return function(){var e=Object(ce.a)(ae.a.mark((function e(t,n,r){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:rt}),e.prev=1,e.next=4,r.getUser();case 4:a=e.sent,t({type:at,user:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:ct,message:ue(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()},lt=n(20),dt=n.n(lt),jt=function(){var e,t=c.a.useState(""),n=Object(S.a)(t,2),r=n[0],a=n[1],s=c.a.useState(""),i=Object(S.a)(s,2),o=i[0],m=i[1],b=Object(l.i)(),O=j((function(e){return e})).auth,x=d();return O.user||je.isAuthenticated()&&!O.loadError?Object(f.jsx)(l.a,{to:(null===(e=b.state)||void 0===e?void 0:e.from)||"/"}):Object(f.jsxs)(Ue,{children:[Object(f.jsxs)(qe,{onSubmit:function(e){var t;(e.preventDefault(),O.isLoggingIn)||x((t={email:r,password:o},function(){var e=Object(ce.a)(ae.a.mark((function e(n,r,a){var c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:Xe}),e.prev=1,e.next=4,a.logInUser(t);case 4:c=e.sent,n({type:Ye,user:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n({type:$e,message:ue(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()))},children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),O.loginError&&Object(f.jsx)(Ge,{message:O.loginError}),Object(f.jsx)(p.Input,{type:"text",name:"email",placeholder:"E-mail",value:r,onChange:function(e){a(e.target.value)}}),Object(f.jsx)(p.PasswordInput,{name:"password",value:o,onChange:function(e){m(e.target.value)}}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(f.jsxs)("div",{className:dt.a.links,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?\xa0"}),Object(f.jsx)(u.b,{to:"/register",className:"text text_type_main-default text_color_accent",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0"}),Object(f.jsx)(u.b,{to:"/forgot-password",className:"text text_type_main-default text_color_accent",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})},pt=function(){var e=j((function(e){return e})).auth,t=d();return c.a.useEffect((function(){t(function(){var e=Object(ce.a)(ae.a.mark((function e(t,n,r){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:et}),e.prev=1,e.next=4,r.logOutUser();case 4:t({type:tt}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t({type:nt,message:ue(e.t0)});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,r){return e.apply(this,arguments)}}())}),[t]),e.logoutError?Object(f.jsx)(Ue,{children:Object(f.jsx)(Ge,{message:e.logoutError})}):e.user?Object(f.jsx)(Ue,{children:Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u0445\u043e\u0434..."})}):Object(f.jsx)(l.a,{to:"/login"})},mt="SEND_RESET_USER_PASSWORD_EMAIL_REQUEST",bt="SEND_RESET_USER_PASSWORD_EMAIL_SUCCESS",Ot="SEND_RESET_USER_PASSWORD_EMAIL_ERROR",xt="RESET_EMAIL_SENT",ft="RESET_USER_PASSWORD_REQUEST",_t="RESET_USER_PASSWORD_SUCCESS",ht="RESET_USER_PASSWORD_ERROR",gt="RESET_PASSWORD_RESET",vt=function(){var e=c.a.useState(""),t=Object(S.a)(e,2),n=t[0],r=t[1],a=j((function(e){return e})).auth,s=j((function(e){return e})).resetPassword,i=Object(l.i)(),o=d();c.a.useEffect((function(){return function(){o({type:xt})}}),[o]);return a.user||je.isAuthenticated()?Object(f.jsx)(l.a,{to:"/"}):s.isEmailSent?Object(f.jsx)(l.a,{to:{pathname:"/reset-password",state:{from:i}},push:!0}):Object(f.jsxs)(Ue,{children:[Object(f.jsxs)(qe,{onSubmit:function(e){e.preventDefault(),s.isSendingEmail||o(function(e){return function(){var t=Object(ce.a)(ae.a.mark((function t(n,r,a){return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:mt}),t.prev=1,t.next=4,a.sendResetUserPasswordEmail(e);case 4:n({type:bt}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n({type:Ot,message:ue(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()}(n))},children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),s.sendingEmailError&&Object(f.jsx)(Ge,{message:s.sendingEmailError}),Object(f.jsx)(p.Input,{type:"text",name:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 E-mail",value:n,onChange:function(e){r(e.target.value)}}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(f.jsx)("div",{className:dt.a.links,children:Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0"}),Object(f.jsx)(u.b,{to:"/login",className:"text text_type_main-default text_color_accent",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},Et=n(52),yt=n.n(Et),St=function(){var e=function(e){return e?"text text_type_main-medium text_color_primary ".concat(yt.a.menuItem):"text text_type_main-medium text_color_inactive  ".concat(yt.a.menuItem)};return Object(f.jsxs)("div",{className:yt.a.main,children:[Object(f.jsx)(u.c,{to:"/profile",exact:!0,className:e,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(f.jsx)(u.c,{to:"/profile/orders",exact:!0,className:e,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(f.jsx)(u.c,{to:"/logout",exact:!0,className:e,children:"\u0412\u044b\u0445\u043e\u0434"})]})};!function(e){e.Pending="pending",e.Created="created",e.Done="done"}(k||(k={}));var Nt=function(e){return{id:e._id,number:e.number,name:e.name,status:e.status,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),ingredients:e.ingredients}},Rt=function(e){return e.map(Nt)},Tt=function(e){var t,n=(new Date).getTime()-e.getTime(),r=new Intl.RelativeTimeFormat("ru",{numeric:"auto"}),a=(t=r.format(-Math.floor(n/864e5),"day")).charAt(0).toUpperCase()+t.slice(1),c=new Intl.DateTimeFormat("ru",{hour:"numeric",minute:"numeric",timeZoneName:"short"}).format(e);return"".concat(a,", ").concat(c)},kt=function(e){return k.Created===e?"\u0421\u043e\u0437\u0434\u0430\u043d":k.Pending===e?"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"},Ct=n(23),wt=n.n(Ct),It=function(e){var t=e.order,n=e.showStatus,r=j((function(e){return e.ingredientsList})).ingredients,a=Object(l.i)(),s=Object(l.h)(),i=c.a.useMemo((function(){return function(e,t){var n,r=[],a=Object(T.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value,s=C(c,t);s&&r.push(s)}}catch(i){a.e(i)}finally{a.f()}return r}(t.ingredients,r).map((function(e){return Object(m.a)(Object(m.a)({},e),{},{uuid:Object(P.a)()})}))}),[t.ingredients,r]),o=c.a.useMemo((function(){return w(i)}),[i]),u=i.length-5,d=c.a.useMemo((function(){return i.slice(0,6).reverse()}),[i]),b=k.Done===t.status?"text text_type_main-default mt-2 text_color_success":"text text_type_main-default mt-2";return Object(f.jsxs)("div",{className:wt.a.card,onClick:function(){s.push({pathname:Object(l.f)("".concat(a.pathname,"/:id"),{id:t.number}),state:{background:a}})},children:[Object(f.jsxs)("div",{className:wt.a.header,children:[Object(f.jsx)("p",{className:"text text_type_digits-default",children:"#".concat(t.number)}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Tt(t.createdAt)})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:t.name}),n&&Object(f.jsx)("p",{className:b,children:kt(t.status)})]}),Object(f.jsxs)("div",{className:wt.a.footer,children:[Object(f.jsx)("div",{className:wt.a.icons,children:d.map((function(e,t){return Object(f.jsxs)("div",{className:wt.a.icon,style:{left:48*(d.length-t-1)},children:[Object(f.jsx)("img",{src:e.imageMobile,alt:e.name,style:{opacity:0===t&&u>0?.6:1}}),0===t&&u>0?Object(f.jsx)("p",{className:"text text_type_main-default",children:"+".concat(u)}):null]},e.uuid)}))}),Object(f.jsxs)("div",{className:wt.a.price,children:[Object(f.jsx)("p",{className:"text text_type_digits-default mr-2",children:o}),Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]})},Ut=n(109),Dt=n.n(Ut),Pt=function(e){var t=e.orders,n=e.showStatus,r=void 0!==n&&n;return Object(f.jsx)("div",{className:"".concat(Dt.a.cards," custom-scroll"),children:t.map((function(e){return Object(f.jsx)(It,{order:e,showStatus:r},e.number)}))})},Lt="USER_ORDERS_LIST_CONNECTION_OPEN",At="USER_ORDERS_LIST_CONNECTION_CLOSE",Mt="USER_ORDERS_LIST_CONNECTION_SUCCESS",Gt="USER_ORDERS_LIST_CONNECTION_ERROR",Bt="USER_ORDERS_LIST_CONNECTION_CLOSED",Jt="USER_ORDERS_LIST_RECEIVED",Wt=n(43),zt=n.n(Wt),Ht=function(){var e=j((function(e){return e.userOrdersList})),t=e.connectionError,n=e.orders,r=d();return c.a.useEffect((function(){return r({type:Lt}),function(){r({type:At})}}),[r]),Object(f.jsx)("div",{className:zt.a.main,children:Object(f.jsxs)("div",{className:zt.a.container,children:[Object(f.jsxs)("div",{className:zt.a.menu,children:[Object(f.jsx)(St,{}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(f.jsx)("div",{className:zt.a.orders,children:t?Object(f.jsx)(Ge,{message:t}):Object(f.jsx)(Pt,{orders:n,showStatus:!0})})]})})},Qt=n(110),Vt=n.n(Qt),qt=function(){var e=c.a.useState(""),t=Object(S.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),s=Object(S.a)(a,2),i=s[0],o=s[1],u=c.a.useState(""),l=Object(S.a)(u,2),m=l[0],b=l[1],O=j((function(e){return e})).auth,x=d();c.a.useEffect((function(){O.user?(r(O.user.name),o(O.user.email)):x(ut())}),[O.user,x]);var _=O.user&&(n!==O.user.name||i!==O.user.email||""!==m);return Object(f.jsxs)(qe,{onSubmit:function(e){e.preventDefault(),x(function(e){return function(){var t=Object(ce.a)(ae.a.mark((function t(n,r,a){var c;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:st}),t.prev=1,t.next=4,a.updateUser(e);case 4:c=t.sent,n({type:it,user:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:ot,message:ue(t.t0)});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()}({name:n,email:i,password:m})),b("")},children:[O.loadError&&Object(f.jsx)(Ge,{message:O.loadError}),O.updateError&&Object(f.jsx)(Ge,{message:O.updateError}),Object(f.jsx)(p.Input,{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:n,icon:"EditIcon",onChange:function(e){r(e.target.value)}}),Object(f.jsx)(p.Input,{type:"email",name:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",value:i,icon:"EditIcon",onChange:function(e){o(e.target.value)}}),Object(f.jsx)(p.PasswordInput,{name:"password",value:m,onChange:function(e){b(e.target.value)}}),_&&Object(f.jsxs)("div",{className:Vt.a.buttons,children:[Object(f.jsx)(p.Button,{type:"secondary",size:"medium",onClick:function(e){e.preventDefault(),O.user&&(r(O.user.name),o(O.user.email)),b("")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Ft=n(33),Kt=n.n(Ft),Zt=function(){return Object(f.jsx)("div",{className:Kt.a.main,children:Object(f.jsxs)("div",{className:Kt.a.container,children:[Object(f.jsxs)("div",{className:Kt.a.menu,children:[Object(f.jsx)(St,{}),Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(f.jsx)("div",{className:Kt.a.form,children:Object(f.jsx)(qt,{})}),Object(f.jsx)("div",{className:Kt.a.space})]})})},Xt=function(){var e=c.a.useState(""),t=Object(S.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),s=Object(S.a)(a,2),i=s[0],o=s[1],m=c.a.useState(""),b=Object(S.a)(m,2),O=b[0],x=b[1],_=j((function(e){return e})).auth,h=d();return _.user||je.isAuthenticated()?Object(f.jsx)(l.a,{to:"/"}):Object(f.jsxs)(Ue,{children:[Object(f.jsxs)(qe,{onSubmit:function(e){var t;(e.preventDefault(),_.isRegistering)||h((t={name:n,email:i,password:O},function(){var e=Object(ce.a)(ae.a.mark((function e(n,r,a){var c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:Fe}),e.prev=1,e.next=4,a.registerUser(t);case 4:c=e.sent,n({type:Ke,user:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n({type:Ze,message:ue(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()))},children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),_.registrationError&&Object(f.jsx)(Ge,{message:_.registrationError}),Object(f.jsx)(p.Input,{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:n,onChange:function(e){r(e.target.value)}}),Object(f.jsx)(p.Input,{type:"text",name:"email",placeholder:"E-mail",value:i,onChange:function(e){o(e.target.value)}}),Object(f.jsx)(p.PasswordInput,{name:"password",value:O,onChange:function(e){x(e.target.value)}}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(f.jsx)("div",{className:dt.a.links,children:Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0"}),Object(f.jsx)(u.b,{to:"/login",className:"text text_type_main-default text_color_accent",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},Yt=function(){var e=c.a.useState(""),t=Object(S.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),s=Object(S.a)(a,2),i=s[0],o=s[1],m=j((function(e){return e})).auth,b=j((function(e){return e})).resetPassword,O=Object(l.i)(),x=d();if(c.a.useEffect((function(){return function(){x({type:gt})}}),[b.isPasswordReset,x]),m.user||je.isAuthenticated())return Object(f.jsx)(l.a,{to:"/"});if(!O.state||!O.state.from||"/forgot-password"!==O.state.from.pathname)return Object(f.jsx)(l.a,{to:"/forgot-password"});if(b.isPasswordReset)return Object(f.jsx)(l.a,{to:"/login",push:!0});return Object(f.jsxs)(Ue,{children:[Object(f.jsxs)(qe,{onSubmit:function(e){e.preventDefault(),b.isResettingPassword||x(function(e){var t=e.password,n=e.token;return function(){var e=Object(ce.a)(ae.a.mark((function e(r,a,c){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:ft}),e.prev=1,e.next=4,c.resetUserPassword({password:t,token:n});case 4:r({type:_t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r({type:ht,message:ue(e.t0)});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,r){return e.apply(this,arguments)}}()}({password:n,token:i}))},children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),b.resetPasswordError&&Object(f.jsx)(Ge,{message:b.resetPasswordError}),Object(f.jsx)(p.PasswordInput,{name:"password",value:n,onChange:function(e){r(e.target.value)}}),Object(f.jsx)(p.Input,{type:"text",name:"token",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:i,onChange:function(e){o(e.target.value)}}),Object(f.jsx)(p.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(f.jsx)("div",{className:dt.a.links,children:Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0"}),Object(f.jsx)(u.b,{to:"/login",className:"text text_type_main-default text_color_accent",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},$t=n(17),en=n.n($t),tn=function(){var e=j((function(e){return e.ordersList})),t=e.orders,n=e.total,r=e.totalToday,a=c.a.useMemo((function(){return t.filter((function(e){return k.Done===e.status}))}),[t]),s=c.a.useMemo((function(){return t.filter((function(e){return k.Pending===e.status}))}),[t]);return Object(f.jsxs)("div",{className:en.a.main,children:[Object(f.jsxs)("div",{className:en.a.orderPanels,children:[Object(f.jsxs)("div",{className:en.a.doneOrderPanel,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(f.jsx)("div",{className:en.a.orders,children:a.map((function(e){return Object(f.jsx)("p",{className:"text text_type_digits-default text_color_success",children:e.number},e.number)}))})]}),Object(f.jsxs)("div",{className:en.a.pendingOrderPanel,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(f.jsx)("div",{className:en.a.orders,children:s.map((function(e){return Object(f.jsx)("p",{className:"text text_type_digits-default",children:e.number},e.number)}))})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large ".concat(en.a.totalShadow),children:n})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(f.jsx)("p",{className:"text text_type_digits-large ".concat(en.a.totalShadow),children:r})]})]})},nn="ORDERS_LIST_CONNECTION_OPEN",rn="ORDERS_LIST_CONNECTION_CLOSE",an="ORDERS_LIST_CONNECTION_SUCCESS",cn="ORDERS_LIST_CONNECTION_ERROR",sn="ORDERS_LIST_CONNECTION_CLOSED",on="ORDERS_LIST_RECEIVED",un=n(34),ln=n.n(un),dn=function(){var e=j((function(e){return e.ordersList})),t=e.connectionError,n=e.orders,r=d();return c.a.useEffect((function(){return r({type:nn}),function(){r({type:rn})}}),[r]),t?Object(f.jsx)("main",{children:Object(f.jsx)(Ue,{children:Object(f.jsx)(Ge,{message:t})})}):Object(f.jsx)("div",{className:ln.a.main,children:Object(f.jsxs)("div",{className:ln.a.container,children:[Object(f.jsx)("p",{className:"text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(f.jsxs)("div",{className:ln.a.content,children:[Object(f.jsx)("div",{className:ln.a.list,children:Object(f.jsx)(Pt,{orders:n})}),Object(f.jsx)("div",{className:ln.a.status,children:Object(f.jsx)(tn,{})})]})]})})},jn=n(18),pn=n.n(jn),mn=function(e){var t=e.order,n=j((function(e){return e.ingredientsList})).ingredients,r=c.a.useMemo((function(){return function(e,t){var n,r=new Map,a=Object(T.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value,s=r.get(c);if(s)s.count+=1;else{var i=C(c,t);i&&r.set(c,{ingredient:i,count:1})}}}catch(o){a.e(o)}finally{a.f()}return Array.from(r.values())}(t.ingredients,n)}),[t.ingredients,n]),a=c.a.useMemo((function(){return r.reduce((function(e,t){return e+t.count*t.ingredient.price}),0)}),[r]),s=k.Done===t.status?"text text_type_main-default mt-2 text_color_success":"text text_type_main-default mt-2";return Object(f.jsxs)("div",{className:pn.a.main,children:[Object(f.jsx)("p",{className:"text text_type_main-medium",children:t.name}),Object(f.jsx)("p",{className:s,children:kt(t.status)}),Object(f.jsx)("p",{className:"text text_type_main-medium mt-15 mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(f.jsx)("div",{className:"".concat(pn.a.ingredients," custom-scroll"),children:r.map((function(e){return Object(f.jsxs)("div",{className:pn.a.ingredient,children:[Object(f.jsxs)("div",{className:pn.a.label,children:[Object(f.jsx)("div",{className:pn.a.icon,children:Object(f.jsx)("img",{src:e.ingredient.imageMobile,alt:e.ingredient.name})}),Object(f.jsx)("p",{className:"text text_type_main-default",children:e.ingredient.name})]}),Object(f.jsxs)("div",{className:pn.a.price,children:[Object(f.jsx)("p",{className:"text text_type_digits-default mr-2",children:"".concat(e.count," x ").concat(e.ingredient.price)}),Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]},e.ingredient.id)}))}),Object(f.jsxs)("div",{className:pn.a.footer,children:[Object(f.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Tt(t.createdAt)}),Object(f.jsxs)("div",{className:pn.a.price,children:[Object(f.jsx)("p",{className:"text text_type_digits-default mr-2",children:a}),Object(f.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]})},bn="GET_ORDER_REQUEST",On="GET_ORDER_SUCCESS",xn="GET_ORDER_ERROR",fn="CLEAR_ORDER",_n=function(){return{type:fn}},hn=function(e){return function(){var t=Object(ce.a)(ae.a.mark((function t(n,r,a){var c;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:bn}),t.prev=1,t.next=4,a.getOrder(e);case 4:c=t.sent,n({type:On,order:Nt(c)}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:xn,message:ue(t.t0)});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()},gn=n(111),vn=n.n(gn),En=function(){var e=Object(l.j)().id,t=j((function(e){return e.orderInfo})),n=t.order,r=t.loadError,a=d();return c.a.useEffect((function(){return a(hn(e)),function(){a(_n())}}),[e,a]),r?Object(f.jsx)(Ue,{children:Object(f.jsx)(Ge,{message:r})}):n?Object(f.jsxs)("div",{className:vn.a.main,children:[Object(f.jsx)("p",{className:"text text_type_digits-default mt-5 mb-5",children:"#".concat(n.number)}),Object(f.jsx)(mn,{order:n})]}):Object(f.jsx)(Ue,{})},yn=function(e){var t=e.onClose,n=Object(l.j)().id,r=j((function(e){return e.orderInfo})),a=r.order,s=r.loadError,i=d();return c.a.useEffect((function(){return i(hn(n)),function(){i(_n())}}),[n,i]),s?Object(f.jsx)(ee,{visible:!0,message:s,onClose:t}):a?Object(f.jsx)($,{title:"#".concat(a.number),visible:!0,onClose:t,children:Object(f.jsx)(mn,{order:a})}):null},Sn=function(e){var t=e.visible,n=e.onClose,r=Object(l.j)().id,a=j((function(e){return e.ingredientsList})).ingredients,s=d(),i=c.a.useMemo((function(){return C(r,a)}),[r,a]);return c.a.useEffect((function(){return i&&s(We(i)),function(){s(ze())}}),[i,s]),Object(f.jsx)($,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",visible:t,onClose:n,children:i?Object(f.jsx)(Le,{ingredient:i}):Object(f.jsx)(Ge,{message:"Ingredient #".concat(r," is not found")})})},Nn=function(e){var t=e.children,n=e.path,r=j((function(e){return e})).auth,a=d();if(c.a.useEffect((function(){!r.user&&je.isAuthenticated()&&a(ut())}),[r.user,a]),!r.user&&je.isAuthenticated()&&!r.loadError)return null;return Object(f.jsx)(l.b,{path:n,render:function(e){var n=e.location;return r.user?t:Object(f.jsx)(l.a,{to:{pathname:"/login",state:{from:n}}})}})},Rn="GET_INGREDIENTS_REQUEST",Tn="GET_INGREDIENTS_SUCCESS",kn="GET_INGREDIENTS_ERROR",Cn=function(){var e,t=j((function(e){return e})).ingredientsList,n=Object(l.i)(),r=Object(l.h)(),a=d();if(c.a.useEffect((function(){a(function(){var e=Object(ce.a)(ae.a.mark((function e(t,n,r){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Rn}),e.prev=1,e.next=4,r.getIngredients();case 4:a=e.sent,t({type:Tn,ingredients:a.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{id:e._id,imageLarge:e.image_large,imageMobile:e.image_mobile})}))}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:kn,message:ue(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}())}),[a]),t.isLoading)return Object(f.jsx)("main",{children:Object(f.jsx)(Ue,{children:Object(f.jsx)("p",{className:"text text_type_main-medium",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})});if(t.loadError)return Object(f.jsx)("main",{children:Object(f.jsx)(Ue,{children:Object(f.jsx)(Ge,{message:t.loadError})})});var s=null===(e=n.state)||void 0===e?void 0:e.background;return Object(f.jsxs)("main",{children:[Object(f.jsx)(v,{}),Object(f.jsxs)(l.d,{location:s||n,children:[Object(f.jsx)(l.b,{path:"/login",children:Object(f.jsx)(jt,{})}),Object(f.jsx)(l.b,{path:"/logout",children:Object(f.jsx)(pt,{})}),Object(f.jsx)(l.b,{path:"/register",children:Object(f.jsx)(Xt,{})}),Object(f.jsx)(l.b,{path:"/forgot-password",children:Object(f.jsx)(vt,{})}),Object(f.jsx)(l.b,{path:"/reset-password",children:Object(f.jsx)(Yt,{})}),Object(f.jsx)(l.b,{path:"/feed/:id",children:Object(f.jsx)(En,{})}),Object(f.jsx)(l.b,{path:"/feed",children:Object(f.jsx)(dn,{})}),Object(f.jsx)(Nn,{path:"/profile/orders/:id",children:Object(f.jsx)(En,{})}),Object(f.jsx)(Nn,{path:"/profile/orders",children:Object(f.jsx)(Ht,{})}),Object(f.jsx)(Nn,{path:"/profile",children:Object(f.jsx)(Zt,{})}),Object(f.jsx)(l.b,{path:"/ingredients/:id",children:Object(f.jsx)(He,{})}),Object(f.jsx)(l.b,{path:"/",children:Object(f.jsx)(Ce,{})})]}),s&&Object(f.jsxs)(l.d,{location:n,children:[Object(f.jsx)(l.b,{path:"/feed/:id",children:Object(f.jsx)(yn,{onClose:function(){return r.goBack()}})}),Object(f.jsx)(Nn,{path:"/profile/orders/:id",children:Object(f.jsx)(yn,{onClose:function(){return r.goBack()}})}),Object(f.jsx)(l.b,{path:"/ingredients/:id",children:Object(f.jsx)(Sn,{visible:!0,onClose:function(){return r.goBack()}})})]})]})},wn=n(21),In=n(113),Un=n(112),Dn={user:null,isRegistering:!1,registrationError:null,isLoggingIn:!1,loginError:null,isLoggingOut:!1,logoutError:null,isLoading:!0,loadError:null,isUpdating:!0,updateError:null},Pn=n(44),Ln={ingredients:[]},An={ingredient:null},Mn={ingredients:[],isLoading:!0,loadError:null},Gn={name:null,number:null,isCreating:!1,creationError:null},Bn={order:null,isLoading:!0,loadError:null},Jn={orders:[],total:0,totalToday:0,isConnected:!1,connectionError:null},Wn={orders:[],isConnected:!1,connectionError:null},zn={isEmailSent:!1,isSendingEmail:!1,sendingEmailError:null,isPasswordReset:!1,isResettingPassword:!1,resetPasswordError:null},Hn=Object(wn.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(m.a)(Object(m.a)({},e),{},{isRegistering:!0});case Ke:return Object(m.a)(Object(m.a)({},Dn),{},{user:t.user});case Ze:return Object(m.a)(Object(m.a)({},Dn),{},{registrationError:t.message});case Xe:return Object(m.a)(Object(m.a)({},e),{},{isLoggingIn:!0});case Ye:return Object(m.a)(Object(m.a)({},Dn),{},{user:t.user});case $e:return Object(m.a)(Object(m.a)({},Dn),{},{loginError:t.message});case et:return Object(m.a)(Object(m.a)({},e),{},{isLoggingOut:!0,logoutError:null});case tt:return Object(m.a)({},Dn);case nt:return Object(m.a)(Object(m.a)({},e),{},{isLoggingOut:!1,logoutError:t.message});case rt:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case at:return Object(m.a)(Object(m.a)({},e),{},{user:t.user,isLoading:!1,loadError:null});case ct:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1,loadError:t.message});case st:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!0});case it:return Object(m.a)(Object(m.a)({},e),{},{user:t.user,isUpdating:!1,updateError:null});case ot:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!1,updateError:t.message});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:var n=D(e.ingredients)?[t.bun].concat(Object(Pn.a)(e.ingredients.slice(1,e.ingredients.length-1)),[t.bun]):[t.bun].concat(Object(Pn.a)(e.ingredients),[t.bun]);return Object(m.a)(Object(m.a)({},e),{},{ingredients:n});case A:var r=Object(Pn.a)(e.ingredients),a=0===t.index&&D(e.ingredients)?1:t.index;return r.splice(a,0,t.ingredient),Object(m.a)(Object(m.a)({},e),{},{ingredients:r});case M:return Object(m.a)(Object(m.a)({},e),{},{ingredients:e.ingredients.filter((function(e,n){return n!==t.index}))});case G:return Object(m.a)(Object(m.a)({},e),{},{ingredients:[]});case B:var c=Object(Pn.a)(e.ingredients),s=c.splice(t.oldIndex,1),i=Object(S.a)(s,1),o=i[0],u=t.newIndex;return 0===u&&D(e.ingredients)?u+=1:u===e.ingredients.length-1&&D(e.ingredients)&&(u-=1),c.splice(u,0,o),Object(m.a)(Object(m.a)({},e),{},{ingredients:c});default:return e}},ingredientDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be:return Object(m.a)(Object(m.a)({},e),{},{ingredient:t.ingredient});case Je:return Object(m.a)(Object(m.a)({},e),{},{ingredient:null});default:return e}},ingredientsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rn:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case Tn:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1,loadError:null,ingredients:t.ingredients});case kn:return Object(m.a)(Object(m.a)({},Mn),{},{isLoading:!1,loadError:t.message});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(m.a)(Object(m.a)({},e),{},{isCreating:!0});case ie:return Object(m.a)(Object(m.a)({},e),{},{name:t.name,number:t.number,isCreating:!1,creationError:null});case oe:return Object(m.a)(Object(m.a)({},Gn),{},{creationError:t.message});default:return e}},orderInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bn:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case On:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1,loadError:null,order:t.order});case xn:return Object(m.a)(Object(m.a)({},Bn),{},{isLoading:!1,loadError:t.message});case fn:return Bn;default:return e}},ordersList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case an:return Object(m.a)(Object(m.a)({},e),{},{isConnected:!0,connectionError:null});case cn:return Object(m.a)(Object(m.a)({},e),{},{connectionError:t.message});case sn:return t.message?Object(m.a)(Object(m.a)({},Jn),{},{connectionError:e.connectionError||t.message}):Object(m.a)(Object(m.a)({},e),{},{isConnected:!1});case on:return Object(m.a)(Object(m.a)({},e),{},{orders:Rt(t.data.orders),total:t.data.total,totalToday:t.data.totalToday});default:return e}},userOrdersList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt:return Object(m.a)(Object(m.a)({},e),{},{isConnected:!0,connectionError:null});case Gt:return Object(m.a)(Object(m.a)({},e),{},{connectionError:t.message});case Bt:return t.message?Object(m.a)(Object(m.a)({},Wn),{},{connectionError:e.connectionError||t.message}):Object(m.a)(Object(m.a)({},e),{},{isConnected:!1});case Jt:return Object(m.a)(Object(m.a)({},e),{},{orders:Rt(t.data.orders.reverse())});default:return e}},resetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object(m.a)(Object(m.a)({},e),{},{isSendingEmail:!0});case bt:return Object(m.a)(Object(m.a)({},zn),{},{isEmailSent:!0});case Ot:return Object(m.a)(Object(m.a)({},zn),{},{sendingEmailError:t.message});case xt:return Object(m.a)({},zn);case ft:return Object(m.a)(Object(m.a)({},e),{},{isResettingPassword:!0});case _t:return Object(m.a)(Object(m.a)({},zn),{},{isPasswordReset:!0});case ht:return Object(m.a)(Object(m.a)({},zn),{},{resetPasswordError:t.message});case gt:return Object(m.a)({},zn);default:return e}}}),Qn=function(e,t){return function(n){var r=null;return function(a){return function(c){var s=n.dispatch,i=c.type,o=t.open,u=t.close,l=t.onOpen,d=t.onClose,j=t.onError,p=t.onMessage;i===o?((r=e()).onopen=function(){s({type:l})},r.onerror=function(){s({type:j,message:null})},r.onclose=function(e){if(e.wasClean)s({type:d,message:null});else{var t="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f"+": \u041a\u043e\u0434 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f WebSocket - ".concat(e.code);s({type:d,message:t})}},r.onmessage=function(e){var t=JSON.parse(e.data),n=t.success,r=t.message,a=Object(b.a)(t,["success","message"]);s(n?{type:p,data:a}:{type:j,message:r||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 WebSocket"})}):i===u&&r&&(r.close(),r=null),a(c)}}}},Vn=new je({url:"https://norma.nomoreparties.space/api",wsUrl:"wss://norma.nomoreparties.space"}),qn={open:nn,close:rn,onOpen:an,onClose:sn,onError:cn,onMessage:on},Fn={open:Lt,close:At,onOpen:Mt,onClose:Bt,onError:Gt,onMessage:Jt},Kn=Object(Un.composeWithDevTools)(Object(wn.applyMiddleware)(In.a.withExtraArgument(Vn),Qn((function(){return Vn.createOrdersSocket()}),qn),Qn((function(){return Vn.createUserOrdersSocket()}),Fn))),Zn=Object(wn.createStore)(Hn,Kn),Xn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,204)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(o.a,{store:Zn,children:Object(f.jsx)(u.a,{basename:"/react-burger",children:Object(f.jsx)(Cn,{})})})}),document.getElementById("root")),Xn()},20:function(e,t,n){e.exports={links:"login-page_links__3ENDR"}},23:function(e,t,n){e.exports={card:"order-card_card__2brCJ",header:"order-card_header__5kdVx",footer:"order-card_footer__26MHV",price:"order-card_price__3kvbl",icons:"order-card_icons__GuH-9",icon:"order-card_icon__2rrpo"}},29:function(e,t,n){e.exports={header:"app-header_header__2OZxD",headerContent:"app-header_headerContent__2m5gd",leftNav:"app-header_leftNav__Yc1RR",rightNav:"app-header_rightNav__1681O",logo:"app-header_logo__1L_6H"}},30:function(e,t,n){e.exports={main:"modal_main__erplU",title:"modal_title__18TBm",closeArea:"modal_closeArea__3bq97",closeIcon:"modal_closeIcon__11eqR",content:"modal_content__Vbfb_"}},31:function(e,t,n){e.exports={main:"burger-constructor_main__2pi_T",dropArea:"burger-constructor_dropArea__1mA-o",submit:"burger-constructor_submit__MlLPx",total:"burger-constructor_total__1SDlJ"}},32:function(e,t,n){e.exports={details:"ingredient-details_details__aSShi",detail:"ingredient-details_detail__rYup2"}},33:function(e,t,n){e.exports={main:"profile-page_main__IlbHg",container:"profile-page_container__3ERRx",menu:"profile-page_menu__qMpnb",form:"profile-page_form__3xjM8",space:"profile-page_space__3SXFO"}},34:function(e,t,n){e.exports={main:"orders-page_main__2k4AQ",container:"orders-page_container__3Z07I",content:"orders-page_content__jB2bt",list:"orders-page_list__fyNJs",status:"orders-page_status__2iDEq"}},43:function(e,t,n){e.exports={main:"profile-orders-page_main__2wHq8",container:"profile-orders-page_container__3P3oT",menu:"profile-orders-page_menu__3Y8CV",orders:"profile-orders-page_orders__38dSm"}},51:function(e,t,n){e.exports={main:"ingredient-card_main__MXewe",price:"ingredient-card_price__2yNO5",name:"ingredient-card_name__27PBy"}},52:function(e,t,n){e.exports={main:"profile-menu_main__23Dsn",menuItem:"profile-menu_menuItem__37TWh"}},70:function(e,t,n){e.exports={main:"constructor-element_main__29fJ6",optional:"constructor-element_optional__1_AW3"}},72:function(e,t,n){e.exports={main:"constructor-elements_main__HlZKa",optionalItems:"constructor-elements_optionalItems__3Do19"}},73:function(e,t,n){e.exports={main:"burger-ingredients_main___Nj9R",cards:"burger-ingredients_cards__rdQZ9"}},97:function(e,t,n){e.exports={main:"app-nav-link_main__13W3K"}}},[[195,1,2]]]);
//# sourceMappingURL=main.8dacee7c.chunk.js.map